# OpenPayroll - DB Models

## Overview
This is a small guide on the OpenPayroll database models. You will see how each schematic is constructed and the naming conventions of the data.

## Priveleged Accounts
Priveleged Accounts are defined as Users who can:
 -  Run Reports
 -  Run Payroll
 -  Create/Access/Edit Personal Data
 -  Manage Clientelle
 -  Manage Priveleged Access
  
A priveleged account is any account that has sufficient permission to perform any of the aforementioned operations, there will be one designated "Super User" which will have permission to manage all User Access.

Schema Overview:
```
{
    _id: String (Unique ID given by Mongo Database),
    u_user_title: String,
    u_user_first_name: String,
    u_user_last_name: String,
    u_username: String,
    u_password: String (Encrypted),
    u_access_level: int (This is generated by adding the value of the Flags given),
    u_access_flags: [
        "RUN_REPORTS",
        "RUN_PAYROLL",
        "PERSONAL_CREATE",
        "PERSONAL_DELETE",
        "PERSONAL_VIEW",
        "PERSONAL_EDIT",
        "CLIENTELLE_CREATE",
        "CLIENTELLE_DELETE",
        "CLIENTELLE_VIEW",
        "CLIENTELLE_EDIT",
        "VIEW_PRIVELEGED_ACCESS",
        "EDIT_PRIVELEGED_ACCESS",
        "DASHBOARD_ACCESS",
        "SUPER_USER"
    ]
}
```

---

## Access Flags
Access Flags are used to determine a User's permission level, these are then weighted by level of importance to give an overall User Access Level (integer value), which will determine a hierarchy of Users. Access Flags will be added or removed as necessary to ensure the User has correct permissions to perform each operation in the software.

| Flag Name | Description | Weight |
| ----------- | ----------- | ----------- |
| RUN_REPORTS | Allow User to generate Reports | 2 |
| RUN_PAYROLL | Allow User to run Payroll | 1 |
|  |  |  |
| PERSONAL_CREATE | Add a new Employee | 6 |
| PERSONAL_DELETE | Remove an Employee | 11 |
| PERSONAL_VIEW | View Employee Information | 5 |
| PERSONAL_EDIT | Edit Employee Information | 6 |
|  |  |  |
| CLIENTELLE_CREATE | Add a new Company | 8 |
| CLIENTELLE_DELETE | Delete a Company | 12 |
| CLIENTELLE_VIEW | View Company Information | 5 |
| CLIENTELLE_EDIT | Edit Company Information | 6 |
|  |  |  |
| VIEW_PRIVELEGED_ACCESS | View Access Flags of User Accounts | 20 |
| EDIT_PRIVELEGED_ACCESS | Edit Access Flags of User Accounts, the user being administrated **MUST** be a lower access level than the acting Account | 32 |
| DASHBOARD_ACCESS | Allow User to access the Analytic Dashboard with their login | 20 |
| SUPER_USER | Delegated to one account only. No user will be able to perform any actions against this account | 190 |

---

## Analytics

Analytics will be used to produce a dashboard for priveleged users, this will allow them to track:
 - Total Reports Generated
 - Total Employee's Payroll ran
 - Total Number of Users with Priveleged Access
 - Total Number of Clients in System
 - Total Number of Employees in System
\
\
\
\
\
Schema Overview:
```
{
    _id: String (Unique ID given by Mongo Database),
    a_reports_gen: int,
    a_payroll_ran: int,
    a_users: int,
    a_clients: int,
    a_employees: int
}
```